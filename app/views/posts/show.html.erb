<h1><%= @post.title %></h1>
<br><br>

<p><%= @post.content %></p>
<br><br>

<p>Post Categories: </p>
<ul>
    <% @post.categories.each do | category | %>
        <li><%= category.name %></li>
    <% end %>
</ul>
<br><br>

Comments:
<br> 
<% @post.comments.each do | comment | %>
    <%= link_to comment.user.username, user_path(comment.user) %> says:
    <%= comment.content %>
<% end %>
<br><br>

Add Comment:
<%= form_for @post.comments.build do | f | %>
    <%= f.label :content %>
    <%= f.text_area :content %>
    <%= f.hidden_field :post_id, value: @post.id %>
    <%= f.label :user %>
    <%= f.collection_select :user_id, User.all, :id, :username %>
    <br>
    Create a new user to comment:
    <%= f.fields_for :user, @post.comments.last.build_user do | user_field | %>
        Username: <%= user_field.text_field :username %>
    <% end%>
    <%= f.submit %>
<% end %>

Users Who Have Commented:
<br>
<ul>
<% @post.users.uniq.each do | user | %>
    <li><%= link_to user.username, user_path(user) %></li>
<% end %>
</ul>